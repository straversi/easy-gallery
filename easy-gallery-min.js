function createImageElement(){var t=document.createElement("img");return t.style.position="relative",t.style.objectFit="contain",t}function createArrow(t,e){var i=document.createElement("img");return i.style.width=e+"px",i.style.position="absolute",i.style.transform="translateY(-50%)",i.style.top="50%",i.style[t]=0,i.src="svg/"+t+"-arrow.svg",i}function createX(t){var e=document.createElement("img");return e.style.width=t+"px",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.transform="translate(12.5%, 12.5%)",e.src="svg/x.svg",e}function resizeImage(t){useFullHeight(t)?(t.style.height="100%",t.style.width="",t.style.transform="",t.style.top=""):(t.style.width="100%",t.style.height="",t.style.transform="translateY(-50%)",t.style.top="50%")}function useFullHeight(t){var e=t.width,i=t.height,n=window.innerWidth,s=window.innerHeight;return n/s>e/i}var Gallery=function(t,e){this.className=t,this.images=document.getElementsByClassName(t),this.size=this.images.length,this.state=-1,this.galleryElement=!1,this.imgElement=0,this.buttonSize=30,this.imgurThumbnailFormat=e;for(var i,n=0;i=this.images[n];n++){var s=this;i.onclick=function(t){return function(){s.toggleOn(t)}}(n)}window.addEventListener("keydown",function(t){switch(t.keyCode){case 27:s.toggleOff();break;case 37:s.cycle(-1);break;case 39:s.cycle(1)}})};Gallery.prototype.toggleOn=function(t){this.state=t,this.galleryElement?this.getImageAndShow():this.createSelf()},Gallery.prototype.toggleOff=function(){this.state=-1,this.hideSelf()},Gallery.prototype.cycle=function(t){this.state=(this.state+this.size+t)%this.size,this.getImageAndShow()},Gallery.prototype.createSelf=function(){var t=document.createElement("div");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.7)",t.style.textAlign="center",document.body.appendChild(t),this.galleryElement=t,this.imgElement=createImageElement(),t.appendChild(this.imgElement),function(){var t=function(t,e,i){i=i||window;var n=!1,s=function(){n||(n=!0,requestAnimationFrame(function(){i.dispatchEvent(new CustomEvent(e)),n=!1}))};i.addEventListener(t,s)};t("resize","optimizedResize")}();var e=this;window.addEventListener("optimizedResize",function(){resizeImage(e.imgElement)});var e=this,i=createArrow("left",this.buttonSize),n=createArrow("right",this.buttonSize),s=createX(this.buttonSize);s.onclick=function(t){return function(){t.toggleOff()}}(e),i.onclick=function(t){return function(){t.cycle(-1)}}(e),n.onclick=function(t){return function(){t.cycle(1)}}(e),t.appendChild(i),t.appendChild(n),t.appendChild(s),this.getImageAndShow()},Gallery.prototype.showSelf=function(){this.galleryElement.style.display="block"},Gallery.prototype.hideSelf=function(){this.galleryElement.style.display="none"},Gallery.prototype.getImageAndShow=function(){var t=this.imgElement;t.onload=function(){resizeImage(t)};var e=this.images[this.state].src;if(this.imgurThumbnailFormat){var i=/^(.+)b\.(jpg|png)$/,n=e.match(i),s=n[1]+"."+n[2];t.src=s}else t.src=e;"block"!=this.galleryElement.style.display&&this.showSelf()};